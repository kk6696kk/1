# maploc/conf/LoD-Loc-learnable.yaml

defaults:
  - data: UAVD4L-LoD
  - training
  - _self_

model:
  name: LoD_Loc
  
  # åŸºç¡€é…ç½®
  lamb: [1.5, 1.0, 0.5]
  lamb_val: [0.8, 0.8, 0.8]
  
  # ğŸ” ç¡®è®¤è¿™é‡Œæ˜¯3ä¸ªstage
  stage_configs: [64, 32, 8]  # â† 3ä¸ªstagesï¼Œæœ€åä¸€ä¸ªä¼šä½¿ç”¨fineç‰¹å¾
  
  feat_ext_ch: 8
  num_sample: [[13, 13, 13, 13], [7, 7, 7, 7], [3, 3, 3, 3]] 
  num_sample_val: [[8, 10, 10, 30], [8, 10, 10, 30], [8, 10, 10, 30]]
  error_ranges: [[-7.5, 7.5], [-10, 10], [-10, 10], [-30, 30]] 
  loss_weight: [0.5, 1.0, 1.5]
  confidence: false 
  loss_id: softmax
  
  # ğŸ” ç¡®è®¤refinementé…ç½®
  learnable_refinement:
    enable: true           # â† å¿…é¡»æ˜¯true
    start_level: 1         # â† ä»stage 2å¼€å§‹ï¼Œstage 3ä¼šä½¿ç”¨fineç‰¹å¾
    max_iterations: 5
    use_confidence_gating: true
    confidence_threshold: 0.3
  
  # Lossæƒé‡
  loss_weights:
    confidence: 0.1
    pose_consistency: 0.05
    feature_quality: 0.02

# è®­ç»ƒé…ç½®
training:
  lr: 1.0e-4
  epochs: 100
  log_every_iter: 100
  eval_every_epoch: 1